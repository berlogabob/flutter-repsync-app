# =========================
# Flutter Web ‚Üí GitHub Pages
# =========================
# –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:
# ```Bash
# make deploy
# ```
# –ò–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–∏–∑–º–µ–Ω–∏, –µ—Å–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–µ—à—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
REPO_NAME = flutter-repsync-app

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è /flutter-repsync-app/
BASE_HREF = /$(REPO_NAME)/

# –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: —Å–æ–±–∏—Ä–∞–µ—Ç + —Å—Ä–∞–∑—É –∫–æ–ø–∏—Ä—É–µ—Ç –≤ /docs
deploy:
	flutter build web --release --base-href $(BASE_HREF)
	@echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ö–æ–ø–∏—Ä—É—é –≤ /docs..."
	rm -rf docs/*
	cp -r build/web/* docs/
	@echo "üéâ –í—Å—ë –≥–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π:"
	@echo "   git add docs/ && git commit -m \"Update GitHub Pages\" && git push"

# –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—Å—Ç–æ —Å–æ–±—Ä–∞—Ç—å –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
build-web:
	flutter build web --release --base-href $(BASE_HREF)

# –û—á–∏—Å—Ç–∫–∞
clean:
	rm -rf build/web docs/*
